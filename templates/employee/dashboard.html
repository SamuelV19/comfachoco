{% extends "base.html" %}
{% block content %}
<div class="grid grid-cols-1 md:grid-cols-3 gap-6">
  <div class="md:col-span-1 bg-white p-4 rounded shadow">
    <h3 class="font-semibold text-lg">Saldo de vacaciones</h3>
    <p class="text-3xl mt-4">{{ user.vacation_balance_days }} días</p>
    <div class="mt-4">
      <a href="{{ url_for('employee.new_request') }}" class="inline-block bg-blue-600 text-white px-4 py-2 rounded">Nueva solicitud</a>
      <a href="{{ url_for('export_history') }}" class="ml-2 inline-block bg-gray-200 text-gray-800 px-3 py-2 rounded">Exportar CSV</a>
    </div>
  </div>

  <div class="md:col-span-2 bg-white p-4 rounded shadow">
    <h3 class="font-semibold text-lg">Historial de solicitudes</h3>
    {% if requests %}
      <table class="w-full mt-4 table-auto">
        <thead>
          <tr class="text-left">
            <th class="px-2 py-1">Tipo</th>
            <th class="px-2 py-1">Inicio</th>
            <th class="px-2 py-1">Fin</th>
            <th class="px-2 py-1">Días</th>
            <th class="px-2 py-1">Estado</th>
            <th class="px-2 py-1">Manager</th>
          </tr>
        </thead>
        <tbody>
        {% for r in requests %}
          <tr class="border-t">
            <td class="px-2 py-2">{{ r.type }}</td>
            <td class="px-2 py-2">{{ r.start_date }}</td>
            <td class="px-2 py-2">{{ r.end_date }}</td>
            <td class="px-2 py-2">{{ r.requested_days }}</td>
            <td class="px-2 py-2 capitalize">{{ r.status }}</td>
            <td class="px-2 py-2">{{ r.manager.full_name if r.manager else '-' }}</td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="mt-4 text-gray-600">Aún no tienes solicitudes.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
